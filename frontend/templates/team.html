<!-- frontend/templates/team.html -->
{% extends "base.html" %}
{% block title %}团队 - Mid·Night{% endblock %}

{% block content %}
<div class="hero">
  <div class="hero-content">
    <p class="hero-title">
      内部组织
    </p>
  </div>
</div>

<div class="accordion space-y-4">
  {% for org in organizations %}
  <div class="accordion-item">
    <button class="accordion-toggle">
      <a> {{ org.name }} </a>
      <span class="toggle-icon">▶</span>
    </button>

    <div class="accordion-panel hidden bg-gray-850 p-4">
      {% if org.members %}
      <div class="member-grid grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {% for member in org.members %}
        <div class="member-card">
          <div class="flex items-center space-x-3">
            <img 
              src="{{ member.avatar }}" 
              alt="{{ member.name }}"
              class="w-12 h-12 rounded-full object-cover border-2 border-cyan-500"
              onerror="this.src='https://ui-avatars.com/api/?name={{ member.name }}&background=0D8ABC&color=fff';"
            >
            <div class="text-sm">
              <p class="font-medium text-white">{{ member.name }}</p>
              <p class="text-gray-400">{{ member.intro }}</p>
            </div>
          </div>
          <div class="mt-3 text-xs text-gray-400">
            <p><strong>职位：</strong>{{ member.role }}</p>
            <p><strong>加入：</strong>{{ member.joined }}</p>
            <p><strong>简介：</strong>{{ member.bio }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <p class="text-gray-500 text-sm">暂无成员</p>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>

<style>
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>

<script>
  document.querySelectorAll('.accordion-toggle').forEach(button => {
    button.addEventListener('click', () => {
      const panel = button.nextElementSibling;
      const icon = button.querySelector('.toggle-icon');
      
      if (panel.classList.contains('hidden')) {
        panel.classList.remove('hidden');
        icon.textContent = '▼';
      } else {
        panel.classList.add('hidden');
        icon.textContent = '▶';
      }
    });
  });

  // ESC 键关闭
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeModal();
  });
</script>
{% endblock %}